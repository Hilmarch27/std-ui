{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "fam-tree",
  "type": "registry:component",
  "title": "Fam Tree Component",
  "description": "A simple layouts Fam Tree",
  "dependencies": [
    "lucide-react"
  ],
  "registryDependencies": [
    "badge",
    "avatar"
  ],
  "files": [
    {
      "path": "src/registry/blocks/fam-tree/components/fam-tree.tsx",
      "content": "'use client'\r\n\r\nimport { useState } from 'react'\r\nimport type { ExpandedState, FamTreeTypes } from '../lib/types/fam-types'\r\nimport { Badge } from '@/components/ui/badge'\r\nimport { ChevronDown, ChevronRight } from 'lucide-react'\r\nimport { Avatar, AvatarImage, AvatarFallback } from '@/components/ui/avatar'\r\n\r\ntype FamTreeProps = FamTreeTypes & {\r\n  vertical?: boolean\r\n  expandedState: ExpandedState\r\n  setExpandedState: (state: ExpandedState) => void\r\n}\r\n\r\nconst FamTree = ({\r\n  id,\r\n  name,\r\n  role,\r\n  profiles = [],\r\n  spouse,\r\n  vertical,\r\n  expandedState,\r\n  setExpandedState\r\n}: FamTreeProps) => {\r\n  const [isHovered, setIsHovered] = useState(false)\r\n\r\n  const hasChildren = profiles && profiles.length > 0\r\n  const isExpanded = expandedState[id] || false\r\n\r\n  const toggleExpand = (e: React.MouseEvent) => {\r\n    e.stopPropagation()\r\n    setExpandedState({\r\n      ...expandedState,\r\n      [id]: !isExpanded\r\n    })\r\n  }\r\n\r\n  // Get initials for avatar fallback\r\n  const getInitials = (name: string) => {\r\n    return name\r\n      .split(' ')\r\n      .map((n) => n[0])\r\n      .join('')\r\n      .toUpperCase()\r\n  }\r\n\r\n  // The spouse avatar positioning will be consistent regardless of layout\r\n  return vertical ? (\r\n    <div className=\"text-center\">\r\n      <div className=\"flex justify-center items-center\">\r\n        <div\r\n          className=\"bg-gray-100 shadow-md py-4 px-2 md:p-0 rounded-lg md:rounded-full text-center grid grid-flow-col items-center relative\"\r\n          onMouseEnter={() => setIsHovered(true)}\r\n          onMouseLeave={() => setIsHovered(false)}\r\n        >\r\n          <div className=\"md:mr-4 w-16 md:w-20 relative\">\r\n            {spouse && isHovered && (\r\n              <div className=\"absolute -top-3 -left-3 z-10 transition-opacity duration-200 ease-in-out\">\r\n                <div className=\"relative group\">\r\n                  <Avatar className=\"w-10 h-10 rounded-full shadow-md border-2 border-white\">\r\n                    <AvatarImage\r\n                      src={spouse.image || `https://randomuser.me/api/portraits/women/${spouse.id}.jpg`}\r\n                      alt={spouse.name}\r\n                    />\r\n                    <AvatarFallback>{getInitials(spouse.name)}</AvatarFallback>\r\n                  </Avatar>\r\n                  <div className=\"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full opacity-0 group-hover:opacity-100 bg-black text-white text-xs rounded p-1 whitespace-nowrap transition-opacity\">\r\n                    {spouse.name}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <Avatar className=\"block shadow-md rounded-full size-16\">\r\n              <AvatarImage src={`https://randomuser.me/api/portraits/men/${id}.jpg`} alt={name} />\r\n              <AvatarFallback>{getInitials(name)}</AvatarFallback>\r\n            </Avatar>\r\n          </div>\r\n          <div className=\"md:text-left text-center\">\r\n            <h2 className=\"text-md font-semibold w-32\">{name}</h2>\r\n            <p className=\"text-gray-700 text-sm uppercase\">{role}</p>\r\n          </div>\r\n          {hasChildren && (\r\n            <button\r\n              onClick={toggleExpand}\r\n              className=\"ml-2 p-1 rounded-full hover:bg-gray-200 transition-colors\"\r\n              aria-label={isExpanded ? 'Collapse' : 'Expand'}\r\n            >\r\n              {isExpanded ? (\r\n                <ChevronDown className=\"h-4 w-4 text-gray-600\" />\r\n              ) : (\r\n                <ChevronRight className=\"h-4 w-4 text-gray-600\" />\r\n              )}\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {hasChildren && isExpanded && (\r\n        <ProfileList profiles={profiles} expandedState={expandedState} setExpandedState={setExpandedState} />\r\n      )}\r\n    </div>\r\n  ) : (\r\n    <div className=\"text-center\">\r\n      <div\r\n        className=\"flex flex-col justify-center items-center relative\"\r\n        onMouseEnter={() => setIsHovered(true)}\r\n        onMouseLeave={() => setIsHovered(false)}\r\n      >\r\n        <div className=\"w-16 relative\">\r\n          {spouse && isHovered && (\r\n            <div className=\"absolute -top-3 -left-3 z-10 transition-opacity duration-200 ease-in-out\">\r\n              <div className=\"relative group\">\r\n                <div className=\"absolute right-0 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 bg-white text-primary text-xs rounded p-[8px] whitespace-nowrap transition-opacity pr-9 z-10 rounded-r-full rounded-l-full group-hover:animate-fade\">\r\n                  {spouse.name}\r\n                </div>\r\n                <Avatar className=\"relative z-20 w-8 h-8 rounded-full shadow-md border-2 border-white\">\r\n                  <AvatarImage\r\n                    src={spouse.image || `https://randomuser.me/api/portraits/women/${spouse.id}.jpg`}\r\n                    alt={spouse.name}\r\n                  />\r\n                  <AvatarFallback>{getInitials(spouse.name)}</AvatarFallback>\r\n                </Avatar>\r\n              </div>\r\n            </div>\r\n          )}\r\n          <Avatar className=\"block rounded-full m-auto shadow-md size-16\">\r\n            <AvatarImage alt={name} src={`https://randomuser.me/api/portraits/men/${Number(id)}.jpg`} />\r\n            <AvatarFallback>{getInitials(name)}</AvatarFallback>\r\n          </Avatar>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-primary\">{name}</p>\r\n          <Badge variant=\"outline\" className=\"border-primary capitalize\">\r\n            {role}\r\n          </Badge>\r\n        </div>\r\n        {hasChildren && (\r\n          <button\r\n            onClick={toggleExpand}\r\n            className=\"mt-1 p-1 rounded-full hover:bg-gray-200 transition-colors\"\r\n            aria-label={isExpanded ? 'Collapse' : 'Expand'}\r\n          >\r\n            {isExpanded ? (\r\n              <ChevronDown className=\"h-4 w-4 text-gray-600\" />\r\n            ) : (\r\n              <ChevronRight className=\"h-4 w-4 text-gray-600\" />\r\n            )}\r\n          </button>\r\n        )}\r\n      </div>\r\n      {hasChildren && isExpanded && (\r\n        <ProfileList profiles={profiles} expandedState={expandedState} setExpandedState={setExpandedState} />\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\ntype ProfileListProps = {\r\n  profiles: FamTreeTypes[]\r\n  expandedState: ExpandedState\r\n  setExpandedState: (state: ExpandedState) => void\r\n}\r\n\r\nconst ProfileList = ({ profiles = [], expandedState, setExpandedState }: ProfileListProps) => {\r\n  return (\r\n    <ul className=\"flex flex-row mt-10 justify-center animate-fade-in\">\r\n      <div className=\"-mt-10 border-l-2 absolute h-10 border-gray-400\" />\r\n      {profiles.map((profile, idX) => {\r\n        const len = profiles.length\r\n        return (\r\n          <li key={idX} className=\"relative p-6\">\r\n            <div\r\n              style={{\r\n                left: idX === 0 ? '50%' : 0,\r\n                right: idX === len - 1 ? '50%' : 0\r\n              }}\r\n              className=\"border-t-2 absolute h-8 border-gray-400 top-0\"\r\n            />\r\n            <div className=\"relative flex justify-center\">\r\n              <div className=\"-mt-6 border-l-2 absolute h-6 border-gray-400 top-0\" />\r\n              <FamTree {...profile} key={idX} expandedState={expandedState} setExpandedState={setExpandedState} />\r\n            </div>\r\n          </li>\r\n        )\r\n      })}\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport { FamTree }\r\n",
      "type": "registry:component",
      "target": "components/fam-tree.tsx"
    },
    {
      "path": "src/features/demo/fam-tree.tsx",
      "content": "import React, { useState } from 'react'\r\nimport profiles from '@/registry/blocks/fam-tree/lib/data/fam-data.json'\r\nimport { FamTree } from '@/registry/blocks/fam-tree/components/fam-tree'\r\nimport { ExpandedState, FamTreeTypes } from '@/registry/blocks/fam-tree/lib/types/fam-types'\r\n\r\nexport default function DemoFamTree() {\r\n  const [expandedState, setExpandedState] = useState<ExpandedState>({})\r\n  return (\r\n    <div className=\"flex flex-col justify-center items-center mt-10\">\r\n      <h1 className=\"text-3xl top-0 absolute\">Family Flow chart</h1>\r\n      <div className=\"container mx-auto text-center pt-32\">\r\n        <div className=\"items-center justify-center flex\">\r\n          {profiles &&\r\n            profiles.map((profile, idX) => (\r\n              <FamTree\r\n                key={idX}\r\n                {...(profile as FamTreeTypes)}\r\n                expandedState={expandedState}\r\n                setExpandedState={setExpandedState}\r\n              />\r\n            ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n",
      "type": "registry:file",
      "target": "components/preview-fam-tree.tsx"
    },
    {
      "path": "src/registry/blocks/fam-tree/lib/types/fam-types.ts",
      "content": "export type FamTreeTypes = {\r\n  id: string\r\n  name: string\r\n  role: string\r\n  profiles?: FamTreeTypes[]\r\n  spouse?: {\r\n    id: string\r\n    name: string\r\n    image?: string\r\n  }\r\n}\r\n\r\nexport type ExpandedState = {\r\n  [key: string]: boolean\r\n}\r\n",
      "type": "registry:lib",
      "target": "lib/types/fam-types.ts"
    },
    {
      "path": "src/registry/blocks/fam-tree/lib/data/fam-data.json",
      "content": "[\r\n  {\r\n    \"id\": \"12\",\r\n    \"name\": \"Duc Sun\",\r\n    \"role\": \"ceo\",\r\n    \"spouse\": {\r\n      \"id\": \"15\",\r\n      \"name\": \"Sarah Sun\"\r\n    },\r\n    \"profiles\": [\r\n      {\r\n        \"id\": \"83\",\r\n        \"name\": \"Leo Six\",\r\n        \"role\": \"Management\",\r\n        \"spouse\": {\r\n          \"id\": \"22\",\r\n          \"name\": \"Emma Six\"\r\n        },\r\n        \"profiles\": [\r\n          {\r\n            \"id\": \"46\",\r\n            \"name\": \"Tab Han\",\r\n            \"role\": \"Project Manager\",\r\n            \"spouse\": {\r\n              \"id\": \"24\",\r\n              \"name\": \"Nina Han\"\r\n            },\r\n            \"profiles\": [\r\n              {\r\n                \"id\": \"76\",\r\n                \"name\": \"Daniel Zhou\",\r\n                \"role\": \"Team Lead\",\r\n                \"spouse\": {\r\n                  \"id\": \"31\",\r\n                  \"name\": \"Lily Zhou\"\r\n                },\r\n                \"profiles\": [\r\n                  {\r\n                    \"id\": \"55\",\r\n                    \"name\": \"Patrick Wang\",\r\n                    \"role\": \"Developer\",\r\n                    \"spouse\": {\r\n                      \"id\": \"58\",\r\n                      \"name\": \"Jenny Wang\"\r\n                    }\r\n                  },\r\n                  {\r\n                    \"id\": \"41\",\r\n                    \"name\": \"Jonsen Li\",\r\n                    \"role\": \"Developer\",\r\n                    \"spouse\": {\r\n                      \"id\": \"60\",\r\n                      \"name\": \"Grace Li\"\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              {\r\n                \"id\": \"44\",\r\n                \"name\": \"Derek Hu\",\r\n                \"role\": \"Team Lead\",\r\n                \"spouse\": {\r\n                  \"id\": \"33\",\r\n                  \"name\": \"Laura Hu\"\r\n                },\r\n                \"profiles\": [\r\n                  {\r\n                    \"id\": \"25\",\r\n                    \"name\": \"Alfie Zu\",\r\n                    \"role\": \"Developer\",\r\n                    \"spouse\": {\r\n                      \"id\": \"29\",\r\n                      \"name\": \"Mira Zu\"\r\n                    }\r\n                  }\r\n                ]\r\n              },\r\n              {\r\n                \"id\": \"30\",\r\n                \"name\": \"Lennis Chan\",\r\n                \"role\": \"Team Lead\",\r\n                \"spouse\": {\r\n                  \"id\": \"32\",\r\n                  \"name\": \"Ellie Chan\"\r\n                }\r\n              }\r\n            ]\r\n          },\r\n          {\r\n            \"id\": \"54\",\r\n            \"name\": \"Peter Miao\",\r\n            \"role\": \"Project Manager\",\r\n            \"spouse\": {\r\n              \"id\": \"27\",\r\n              \"name\": \"Anna Miao\"\r\n            },\r\n            \"profiles\": [\r\n              {\r\n                \"id\": \"90\",\r\n                \"name\": \"Peter Ming\",\r\n                \"role\": \"Team Lead\",\r\n                \"spouse\": {\r\n                  \"id\": \"39\",\r\n                  \"name\": \"Sasha Ming\"\r\n                }\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        \"id\": \"43\",\r\n        \"name\": \"Shi Ten\",\r\n        \"role\": \"HR\",\r\n        \"spouse\": {\r\n          \"id\": \"18\",\r\n          \"name\": \"Maya Ten\"\r\n        }\r\n      },\r\n      {\r\n        \"id\": \"97\",\r\n        \"name\": \"Shawn Mong\",\r\n        \"role\": \"admin\",\r\n        \"spouse\": {\r\n          \"id\": \"99\",\r\n          \"name\": \"Helen Mong asdadasda\"\r\n        }\r\n      }\r\n    ]\r\n  }\r\n]\r\n",
      "type": "registry:lib",
      "target": "lib/data/fam-data.json"
    }
  ],
  "cssVars": {}
}